var e,n=-1,t=function(e){addEventListener("pageshow",(function(t){t.persisted&&(n=t.timeStamp,e(t))}),!0)},i=function(){return window.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,n=performance.navigation.type,t={entryType:"navigation",startTime:0,type:2==n?"back_forward":1===n?"reload":"navigate"};for(var i in e)"navigationStart"!==i&&"toJSON"!==i&&(t[i]=Math.max(e[i]-e.navigationStart,0));return t}())},r=function(){var e=i();return e&&e.activationStart||0},a=function(e,t){var a=i(),o="navigate";return n>=0?o="back-forward-cache":a&&(o=document.prerendering||r()>0?"prerender":document.wasDiscarded?"restore":a.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},o=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},t||{})),i}}catch(e){}},c=function(e,n,t,i){var r,a;return function(o){n.value>=0&&(o||i)&&((a=n.value-(r||0))||void 0===r)&&(r=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?"poor":e>n[0]?"needs-improvement":"good"}(n.value,t),e(n))}},u=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},s=function(e){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||e(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},f=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},d=-1,l=function(e){"hidden"===document.visibilityState&&d>-1&&(d="visibilitychange"===e.type?e.timeStamp:0,p())},v=function(){addEventListener("visibilitychange",l,!0),addEventListener("prerenderingchange",l,!0)},p=function(){removeEventListener("visibilitychange",l,!0),removeEventListener("prerenderingchange",l,!0)},m=function(){return d<0&&((d=window.webVitals.firstHiddenTime)===1/0&&v(),t((function(){setTimeout((function(){d="hidden"!==document.visibilityState||document.prerendering?1/0:0,v()}),0)}))),{get firstHiddenTime(){return d}}},h=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},g=function(e,n){n=n||{},h((function(){var i,s=[1800,3e3],f=m(),d=a("FCP"),l=o("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(l.disconnect(),e.startTime<f.firstHiddenTime&&(d.value=Math.max(e.startTime-r(),0),d.entries.push(e),i(!0)))}))}));l&&(i=c(e,d,s,n.reportAllChanges),t((function(t){d=a("FCP"),i=c(e,d,s,n.reportAllChanges),u((function(){d.value=performance.now()-t.timeStamp,i(!0)}))})))}))},y=function(e,n){n=n||{},g(f((function(){var i,r=[.1,.25],f=a("CLS",0),d=0,l=[],v=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=l[0],t=l[l.length-1];d&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(d+=e.value,l.push(e)):(d=e.value,l=[e])}})),d>f.value&&(f.value=d,f.entries=l,i())},p=o("layout-shift",v);p&&(i=c(e,f,r,n.reportAllChanges),s((function(){v(p.takeRecords()),i(!0)})),t((function(){d=0,f=a("CLS",0),i=c(e,f,r,n.reportAllChanges),u((function(){return i()}))})),setTimeout(i,0))})))},T=function(e,n){n=n||{},h((function(){var i,r=[100,300],u=m(),d=a("FID"),l=function(e){e.startTime<u.firstHiddenTime&&(d.value=e.processingStart-e.startTime,d.entries.push(e),i(!0))},v=function(e){e.forEach(l)},p=o("first-input",v);i=c(e,d,r,n.reportAllChanges),p&&s(f((function(){v(p.takeRecords()),p.disconnect()}))),console.warn('The web-vitals "base+polyfill" build is deprecated. See: https://bit.ly/3aqzsGm'),p||window.webVitals.firstInputPolyfill(l),t((function(){d=a("FID"),i=c(e,d,r,n.reportAllChanges),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(l)}))}))},w=0,b=1/0,C=0,E=function(e){e.forEach((function(e){e.interactionId&&(b=Math.min(b,e.interactionId),C=Math.max(C,e.interactionId),w=C?(C-b)/7+1:0)}))},S=function(){return e?w:performance.interactionCount||0},I=function(){"interactionCount"in performance||e||(e=o("event",E,{type:"event",buffered:!0,durationThreshold:0}))},L=0,P=function(){return S()-L},A=[],F={},M=function(e){var n=A[A.length-1],t=F[e.interactionId];if(t||A.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};F[i.id]=i,A.push(i)}A.sort((function(e,n){return n.latency-e.latency})),A.splice(10).forEach((function(e){delete F[e.id]}))}},k=function(e,n){n=n||{},h((function(){var i=[200,500];I();var r,u=a("INP"),f=function(e){e.forEach((function(e){(e.interactionId&&M(e),"first-input"===e.entryType)&&(!A.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&M(e))}));var n,t=(n=Math.min(A.length-1,Math.floor(P()/50)),A[n]);t&&t.latency!==u.value&&(u.value=t.latency,u.entries=t.entries,r())},d=o("event",f,{durationThreshold:n.durationThreshold||40});r=c(e,u,i,n.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),s((function(){f(d.takeRecords()),u.value<0&&P()>0&&(u.value=0,u.entries=[]),r(!0)})),t((function(){A=[],L=S(),u=a("INP"),r=c(e,u,i,n.reportAllChanges)})))}))},x={},B=function(e,n){n=n||{},h((function(){var i,d=[2500,4e3],l=m(),v=a("LCP"),p=function(e){var n=e[e.length-1];if(n){var t=Math.max(n.startTime-r(),0);t<l.firstHiddenTime&&(v.value=t,v.entries=[n],i())}},h=o("largest-contentful-paint",p);if(h){i=c(e,v,d,n.reportAllChanges);var g=f((function(){x[v.id]||(p(h.takeRecords()),h.disconnect(),x[v.id]=!0,i(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,g,!0)})),s(g),t((function(t){v=a("LCP"),i=c(e,v,d,n.reportAllChanges),u((function(){v.value=performance.now()-t.timeStamp,x[v.id]=!0,i(!0)}))}))}}))},D=function e(n){document.prerendering?h((function(){return e(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(n)}),!0):setTimeout(n,0)},H=function(e,n){n=n||{};var o=[800,1800],u=a("TTFB"),s=c(e,u,o,n.reportAllChanges);D((function(){var f=i();if(f){var d=f.responseStart;if(d<=0||d>performance.now())return;u.value=Math.max(d-r(),0),u.entries=[f],s(!0),t((function(){u=a("TTFB",0),(s=c(e,u,o,n.reportAllChanges))(!0)}))}}))};export{y as getCLS,g as getFCP,T as getFID,k as getINP,B as getLCP,H as getTTFB,y as onCLS,g as onFCP,T as onFID,k as onINP,B as onLCP,H as onTTFB};
